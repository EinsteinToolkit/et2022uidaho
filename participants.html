---
---
{% include base.html %}
<!DOCTYPE html>
<html lang="en">
<head>
  {% include head.html %}
  <title>Registered Participants</title>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <!-- from https://github.com/typeiii/jquery-csv-->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-csv/1.0.11/jquery.csv.min.js"></script>
  <script>
// this handles dynamically pulling and updating the list of participants
function getPartipantsList() {
  return; // no longer done now that the school is finished
  // see https://stackoverflow.com/questions/62611127/trouble-accessing-google-sheet-as-a-tsv-file
  var url="https://script.google.com/macros/s/AKfycbzaO60lL2WDcgor8HZ_vnwc1AbDs0ezXt4Xg-tEaPHcUVBS2zqTjUDnUDYNwzq_kfWD/exec";
  var participantsFile = new XMLHttpRequest();
  participantsFile.onreadystatechange = function() {
    if (participantsFile.readyState == 4 && participantsFile.status == 200) {
      // helper function to turn any string into save to include escaped string
      function stripHTML(s) {
        var text = document.createTextNode(s);
        var p = document.createElement('p');
        p.appendChild(text);
        return p.innerHTML;
      };

      lines = $.csv.toArrays(participantsFile.responseText);
      // remove "header" row
      lines.shift();
      // sort by name and then Institution
      lines = lines.sort(function(a,b){return (a[0]+a[1]).localeCompare((b[0]+b[1]))});
      
      // TODO: could use createelelemt etc
      text ='<ul>\n';
      for(var i=0; i<lines.length; i++) {
        fields = lines[i]; //.split('\t');
        if(fields[2].trim() == "TRUE" && fields[0] != "") {
            text += "<li>";
            text += stripHTML(fields[0]).trim();
            if (fields[1] != "") {
                text += " (" + stripHTML(fields[1]).trim() + ")";
            }
            text += "</li>\n";
        }
        // text += '<tr><td>' + stripHTML(fields[0]) + '</td>' +
        //             '<td>' + stripHTML(fields[1]) + '</td>' +
        //             '<td>' + stripHTML(fields[2]).replaceAll('\n','<br/>') + '</td>' +
        //             '<td>' + (fields[4].trim() == "TRUE" ? "yes" : fields[4].trim() == "FALSE" ? "no" : "") + '</td></tr>\n';
      }
      text += '</ul>'
      
      sidebar=document.getElementById('participants');
      sidebar.innerHTML=text;
    }
  };
  participantsFile.open("GET", url, true);
  participantsFile.send(null);
}

// shuffle participant photos to not always show the same person first
function randomizeParticipantPhotos(id) {
    var div = document.getElementById(id);
    var newList = Array.from(div.children);
    for(let i = 0 ; i < newList.length ; i++) {
        let j = Math.floor(Math.random() * newList.length);
        let tmp = newList[i];
        newList[i] = newList[j];
        newList[j] = tmp;
    }
    // bit too new for my taste: https://developer.mozilla.org/en-US/docs/Web/API/Element/replaceChildren
    // div.replaceChildren(newList);
    while(div.firstChild) {
        div.removeChild(div.firstChild);
    }
    for(let i = 0 ; i < newList.length ; i++) {
        div.append(newList[i]);
    }
}
  </script>
</head>
<body id="index" onload="getPartipantsList()">
  {% include navbar.html %}
  <div class="container">
    <div class="row fix">
      <div class="col-xs-12">
        <h1>Participants</h1>
<!--         <div id="participant_photos" style="width: 100%; text-align: center"> -->
<!-- <\!-- some of the cut images are one pixel row show -\-> -->
<!-- {%for img in site.data.participant_photos-%} -->
<!-- <img width="325" height="186" src="{{img}}" alt="Photo of a participant"> -->
<!-- {%-endfor%} -->
<!--         </div> -->
        <!-- <\!-- cannot be attached to div (where I want it) via onload -\-> -->
        <!-- <script>randomizeParticipantPhotos("participant_photos")</script> --
        -- -->

        <div id="participants">
          <ul>
            TBA
          </ul>
        </div>
        <h1>Code of Conduct</h1>
        <div id="codeofconduct">
          <ul>
            We will observe the Code of Conduct standard for APS meetings.

            All participants, including attendees, vendors, event staff, volunteers,
            and all other stakeholders at the Einstein Toolkit (ET) meeting will
            conduct themselves in a professional manner that is welcoming to all
            participants and free from any form of discrimination, harassment, or
            retaliation. Participants will treat each other with respect and
            consideration to create a collegial, inclusive, and professional
            environment at ET meetings. Creating a supportive environment to enable
            scientific discourse at ET meetings is the responsibility of all
            participants.

            Participants will avoid any inappropriate actions or statements based on
            individual characteristics such as age, race, ethnicity, sexual
            orientation, gender identity, gender expression, marital status,
            nationality, political affiliation, ability status, educational
            background, or any other characteristic protected by law. Disruptive or
            harassing behavior of any kind will not be tolerated. Harassment
            includes but is not limited to inappropriate or intimidating behavior
            and language, unwelcome jokes or comments, unwanted touching or
            attention, offensive images, photography without permission, and
            stalking.

            Violations of this code of conduct policy should be reported to meeting
            organizers and/or event staff. Sanctions may range from verbal warning,
            to ejection from the meeting without refund, to notifying appropriate
            authorities. Retaliation for complaints of inappropriate conduct will
            not be tolerated. If a participant observes inappropriate comments or
            actions and personal intervention seems appropriate and safe, they
            should be considerate of all parties before intervening.
          </ul>
        </div>
      </div>
    </div>
  </div>
  <div class="container">
    <div class="row">
      <div class="col-xs-12">
        {% include footer.html %}
      </div>
    </div>
  </div>
{% include postbody.html %}
</body>
</html>
